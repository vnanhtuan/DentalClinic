<v-card class="pa-4" rounded="lg">
    <v-card-title class="text-h6">{{ formTitle }}</v-card-title>
    <v-card-text>
        <v-form @submit.prevent="saveStaff" ref="staffForm">
            <v-row>
                <v-col cols="12" md="6">
                    <v-text-field label="Họ và Tên"
                                  v-model="staff.fullName"
                                  variant="outlined"
                                  :rules="[rules.required]"></v-text-field>

                    <v-text-field label="Email"
                                  v-model="staff.email"
                                  variant="outlined"
                                  :rules="[rules.required, rules.email]"></v-text-field>

                    <v-text-field label="Điện thoại"
                                  v-model="staff.phone"
                                  variant="outlined"></v-text-field>
                </v-col>
                <v-col cols="12" md="6">
                    <v-select label="Chức danh/Vai trò"
                              v-model="staff.roleIds"
                              :items="roles"
                              item-title="name"
                              item-value="roleId"
                              variant="outlined"
                              required
                              multiple
                              chips
                              :rules="[rules.requiredRoles]"
                              placeholder="Chọn một vai trò"
                              class="mb-4">
                    </v-select>

                    <v-text-field label="Tên đăng nhập"
                                  v-model="staff.username"
                                  variant="outlined"
                                  :rules="[rules.required]"
                                  :disabled="isEditMode"></v-text-field>

                    <!-- Chỉ hiển thị mật khẩu khi tạo mới -->
                    <v-text-field v-if="!isEditMode"
                                  label="Mật khẩu"
                                  v-model="staff.password"
                                  variant="outlined"
                                  type="password"
                                  :rules="[rules.required, rules.minLength]"></v-text-field>
                </v-col>
            </v-row>

            <v-alert v-if="error" type="error" dense class="mb-4" closable @click:close="error = null">
                {{ error }}
            </v-alert>            <v-btn type="submit" color="primary" class="btn-primary mr-2" :loading="loading">
                Lưu Thay Đổi
            </v-btn>
            <v-btn color="secondary" @click="goBack" class="btn-secondary">Hủy</v-btn>
        </v-form>
    </v-card-text>

    <!-- Message Dialog for confirmations and notifications -->
    <message-dialog
        v-model="showDialog"
        :type="dialogConfig.type"
        :title="dialogConfig.title"
        :message="dialogConfig.message"
        :show-cancel="dialogConfig.showCancel"
        :loading="dialogConfig.loading"
        :ok-text="dialogConfig.okText"
        :cancel-text="dialogConfig.cancelText"
        @ok="dialogConfig.onOk"
        @cancel="dialogConfig.onCancel">
    </message-dialog>
</v-card>