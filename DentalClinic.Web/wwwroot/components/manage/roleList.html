<!-- Bắt đầu file: wwwroot/components/manage/roleList.html -->
<v-card class="pa-4" rounded="lg">
    <v-card-title class="d-flex flex-column flex-sm-row justify-space-between align-start align-sm-center ga-3">
        <span class="text-h6">Quản lý Vai trò (Roles)</span>
        <v-btn color="primary" @click="goToCreate" class="btn-primary" prepend-icon="mdi-account-lock-outline">
            <span class="d-none d-sm-inline">Thêm Vai trò Mới</span>
            <span class="d-inline d-sm-none">Thêm</span>
        </v-btn>
    </v-card-title>

    <v-card-text class="pa-0 pa-sm-4">
        <!-- Loading State -->
        <v-skeleton-loader v-if="loading" type="table" class="mx-auto"></v-skeleton-loader>

        <!-- Data Table (Desktop và Mobile dùng chung vì ít cột) -->
        <div v-else class="scrollable-card-text">
            <v-data-table :headers="headers"
                          :items="roles"
                          item-value="roleId"
                          class="elevation-1"
                          :loading="loading"
                          loading-text="Đang tải dữ liệu..."
                          no-data-text="Không tìm thấy vai trò nào"
                          :items-per-page="10"
                          density="comfortable">

                <!-- Cột Hành động (Edit/Delete) -->
                <template v-slot:item.actions="{ item }">
                    <div class="d-flex ga-1 justify-end">
                        <v-tooltip location="top" text="Chỉnh sửa">
                            <template v-slot:activator="{ props }">
                                <v-btn v-bind="props" icon="mdi-pencil" variant="text" color="info" size="small" @click="goToEdit(item.roleId)"></v-btn>
                            </template>
                        </v-tooltip>
                        <v-tooltip location="top" text="Xóa">
                            <template v-slot:activator="{ props }">
                                <!-- Không cho xóa Role "Admin" (Giả định) -->
                                <v-btn v-if="item.name !== 'Admin'" v-bind="props" icon="mdi-delete" variant="text" color="error" size="small" @click="confirmDelete(item)"></v-btn>
                            </template>
                        </v-tooltip>
                    </div>
                </template>
            </v-data-table>
        </div>
    </v-card-text>
    <message-dialog v-model="showDialog"
                    :type="dialogConfig.type"
                    :title="dialogConfig.title"
                    :message="dialogConfig.message"
                    :show-cancel="dialogConfig.showCancel"
                    :loading="dialogConfig.loading"
                    :ok-text="dialogConfig.okText"
                    :cancel-text="dialogConfig.cancelText"
                    @ok="dialogConfig.onOk"
                    @cancel="dialogConfig.onCancel">
    </message-dialog>
</v-card>